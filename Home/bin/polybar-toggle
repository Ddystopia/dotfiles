#!/bin/bash

if ! ps -C polybar > /dev/null; then
  1>&2 echo "Polybar-toggle: Polybar is not running"
  exit 1
fi

hidden=$(cat /tmp/polybar-hidden || '1')

if [[ $hidden == '1' ]]; then
  polybar-msg cmd show
  bspc config bottom_padding 24
  echo '0' > /tmp/polybar-hidden
else
  polybar-msg cmd hide
  bspc config bottom_padding 0
  echo '1' > /tmp/polybar-hidden
fi
